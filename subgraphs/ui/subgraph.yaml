specVersion: 0.0.5
schema:
  file: ./schema.graphql
dataSources:
  - kind: ethereum
    name: Penrose
    source:
      abi: Penrose
      startBlock: 4954220
      address: "0x5bcB4eb9F66f05735045118560C6DD7097e7582D"
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - FeeToUpdate
        - FeeVeTapUpdate
        - OwnershipTransferred
        - ProtocolWithdrawal
        - RegisterMasterContract
        - SingularityMarket
        - BigBangMarket
        - SwapperUpdate
        - UsdoTokenUpdated
      abis:
        - name: Penrose
          file: ./abis/Penrose.json
        - name: Singularity
          file: ./abis/Singularity.json
        - name: BigBang
          file: ./abis/BigBang.json
        - name: ERC20
          file: ./abis/ERC20.json
        - name: ERC20SymbolBytes
          file: ./abis/ERC20SymbolBytes.json
        - name: ERC20NameBytes
          file: ./abis/ERC20NameBytes.json
      eventHandlers:
        - event: RegisterSingularity(indexed address,indexed address)
          handler: handleRegisterSingularity
        - event: RegisterBigBang(indexed address,indexed address)
          handler: handleRegisterBigBang
      file: ./src/penrose.ts
    network: arbitrum-sepolia
  - kind: ethereum
    name: TapiocaWrapper
    network: arbitrum-sepolia
    source:
      abi: TapiocaWrapper
      startBlock: 4954220
      address: "0xB5098803dAC7ff13E5cb1ecb13E11567670aCAf6"
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - TOFToken
      abis:
        - name: TapiocaWrapper
          file: ./abis/TapiocaWrapper.json
        - name: ERC20
          file: ./abis/ERC20.json
        - name: ERC20SymbolBytes
          file: ./abis/ERC20SymbolBytes.json
        - name: ERC20NameBytes
          file: ./abis/ERC20NameBytes.json
        - name: TOFT
          file: ./abis/TOFT.json
      eventHandlers:
        - event: CreateOFT(indexed address,indexed address)
          handler: handleCreateOFT
      file: ./src/tapioca-wrapper.ts
  - kind: ethereum
    name: USDO
    network: arbitrum-sepolia
    source:
      abi: USDO
      startBlock: 4954220
      address: "0x67B715806B93495Dc64A938168EBDA17eb01E732"
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - TOFToken
      abis:
        - name: USDO
          file: ./abis/USDO.json
        - name: ERC20
          file: ./abis/ERC20.json
        - name: ERC20SymbolBytes
          file: ./abis/ERC20SymbolBytes.json
        - name: ERC20NameBytes
          file: ./abis/ERC20NameBytes.json
      eventHandlers:
        - event: SetTrustedRemote(uint16,bytes)
          handler: handleSetTrustedRemoteUSDO
      file: ./src/usdo.ts
  - kind: ethereum
    name: YieldBox
    source:
      abi: YieldBox
      startBlock: 4954220
      address: "0xb7Bd73f92Af817055B6a5E2bcb19804b9D515864"
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - TOFToken
      abis:
        - name: YieldBox
          file: ./abis/YieldBox.json
      eventHandlers:
        - event: AssetRegistered(indexed uint8,indexed address,address,indexed
            uint256,uint256)
          handler: handleAssetRegistered
      file: ./src/yieldbox.ts
    network: arbitrum-sepolia
  - kind: ethereum
    name: TOLP
    source:
      abi: TOLP
      startBlock: 4954220
      address: "0xF2FE6997F7dbc5f3F0b9e45B921eFb6045fa1F11"
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - TOLP
        - TOLPLockPosition
      abis:
        - name: TOLP
          file: ./abis/tOLP.json
      eventHandlers:
        - event: Mint(indexed address,indexed uint256,uint256,uint128,uint128)
          handler: handleMint
        - event: Burn(indexed address,indexed uint256,uint256)
          handler: handleBurn
        - event: Transfer(indexed address,indexed address,indexed uint256)
          handler: handleTransfer
        - event: RegisterSingularity(indexed uint256,address,uint256)
          handler: handleRegisterSingularity
        - event: UnregisterSingularity(indexed uint256,address)
          handler: handleUnregisterSingularity
        - event: SetSGLPoolWeight(indexed uint256,address,uint256)
          handler: handleSetSGLPoolWeight
        - event: UpdateTotalSingularityPoolWeights(uint256)
          handler: handleUpdateTotalSingularityPoolWeights
        - event: ActivateSGLPoolRescue(indexed uint256,address)
          handler: handleActivateSGLPoolRescue
      file: ./src/tolp.ts
    network: arbitrum-sepolia
  - kind: ethereum
    name: TOB
    source:
      abi: TOB
      startBlock: 4954220
      address: "0x925c1fa44796612CADaFc8624a9e27236BCCF39C"
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - TapiocaOptionBroker
      abis:
        - name: TOB
          file: ./abis/tOB.json
        - name: ERC20
          file: ./abis/ERC20.json
        - name: ERC20SymbolBytes
          file: ./abis/ERC20SymbolBytes.json
        - name: ERC20NameBytes
          file: ./abis/ERC20NameBytes.json
      eventHandlers:
        - event: SetPaymentToken(indexed address,address,bytes)
          handler: handleSetPaymentToken
        - event: NewEpoch(indexed uint256,uint256,uint256)
          handler: handleNewEpoch
        - event: Participate(indexed uint256,indexed
            uint256,uint256,uint256,uint256,uint256)
          handler: handleParticipate
        - event: ExitPosition(indexed uint256,indexed uint256,uint256)
          handler: handleExitPosition
      file: ./src/tob.ts
    network: arbitrum-sepolia
  - kind: ethereum
    name: OTAP
    source:
      abi: OTAP
      startBlock: 4954220
      address: "0x53D07B6dd29702194Cf8B93671d28Afc94a957E1"
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - TapiocaOptionBroker
      abis:
        - name: OTAP
          file: ./abis/OTAP.json
      eventHandlers:
        - event: Transfer(indexed address,indexed address,indexed uint256)
          handler: handleTransfer
      file: ./src/otap.ts
    network: arbitrum-sepolia
templates:
  - kind: ethereum
    name: TOFT
    network: arbitrum-sepolia
    source:
      abi: TOFT
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - TOFToken
      abis:
        - name: TOFT
          file: ./abis/TOFT.json
      eventHandlers:
        - event: SetTrustedRemote(uint16,bytes)
          handler: handleSetTrustedRemote
      file: ./src/toft.ts
